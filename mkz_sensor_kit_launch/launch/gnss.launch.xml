<launch>
  <arg name="launch_driver" default="true"/>

  <!-- Use package-installed config defaults; no custom receiver.yaml required -->
  <arg name="novatel_init_file"
       default="$(find-pkg-share novatel_oem7_driver)/config/std_init_commands.yaml"/>
  <arg name="oem7_ip_addr" default="192.168.4.199"/>

  <!-- Topics from NovAtel driver -->
  <arg name="navsatfix_topic_name"   default="/novatel/oem7/fix"/>
  <arg name="orientation_topic_name" default="/novatel/oem7/inspva"/>
  <arg name="gnss_frame" default="gnss_link"/>

  <group if="$(var launch_driver)">
    <include file="$(find-pkg-share novatel_oem7_driver)/launch/oem7_net.launch.py">
      <!-- Drop config_file unless you actually have a YAML -->
      <arg name="init_commands_file" value="$(var novatel_init_file)"/>
      <arg name="oem7_ip_addr" value="$(var oem7_ip_addr)"/>
      <!-- Optional if you need non-defaults:
      <arg name="oem7_port" value="3001"/>
      <arg name="oem7_if" value="Oem7ReceiverTcp"/>
      -->
    </include>
  </group>

  <group>
    <push-ros-namespace namespace="gnss"/>
    <include file="$(find-pkg-share autoware_gnss_poser)/launch/gnss_poser.launch.xml">
      <arg name="input_topic_fix" value="$(var navsatfix_topic_name)"/>
      <arg name="input_topic_orientation" value="$(var orientation_topic_name)"/>
      <arg name="output_topic_gnss_pose" value="pose"/>
      <arg name="output_topic_gnss_pose_cov" value="pose_with_covariance"/>
      <arg name="output_topic_gnss_fixed" value="fixed"/>
      <arg name="use_gnss_ins_orientation" value="true"/>
      <arg name="gnss_frame" value="$(var gnss_frame)"/>
    </include>
  </group>
</launch>

